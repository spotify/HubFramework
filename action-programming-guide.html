<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Action programming guide  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>


    <a title="Action programming guide  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          HubFramework Docs
        </a>
         (95% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/spotify/HubFramework">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fspotify%2Egithub%2Eio%2FHubFramework%2Fdocsets%2FHubFramework%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">HubFramework Reference</a>
      <img class="carat" src="img/carat.png" />
      Action programming guide  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="action-programming-guide.html">Action programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="component-programming-guide.html">Component programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="concept-guide.html">Concept guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="content-programming-guide.html">Content programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="getting-started-guide.html">Getting started guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="json-programming-guide.html">JSON programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="layout-programming-guide.html">Layout programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="live-editing-guide.html">Live editing guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="setup-guide.html">Setup guide</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBBlockContentOperation.html">HUBBlockContentOperation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBBlockContentOperationFactory.html">HUBBlockContentOperationFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBComponentCollectionViewCell.html">HUBComponentCollectionViewCell</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBIdentifier.html">HUBIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBManager.html">HUBManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBViewController.html">HUBViewController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBViewURIPredicate.html">HUBViewURIPredicate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryBanner">HUBComponentCategoryBanner</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryCard">HUBComponentCategoryCard</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryCarousel">HUBComponentCategoryCarousel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryHeader">HUBComponentCategoryHeader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryRow">HUBComponentCategoryRow</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitAlwaysStackUpwards">HUBComponentLayoutTraitAlwaysStackUpwards</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitCentered">HUBComponentLayoutTraitCentered</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitCompactWidth">HUBComponentLayoutTraitCompactWidth</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitFullWidth">HUBComponentLayoutTraitFullWidth</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitStackable">HUBComponentLayoutTraitStackable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBDefaults.h@HUBDefaultComponentNamespace">HUBDefaultComponentNamespace</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBActionTrigger.html">HUBActionTrigger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentImageType.html">HUBComponentImageType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentLayoutContentEdge.html">HUBComponentLayoutContentEdge</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentSelectionState.html">HUBComponentSelectionState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentType.html">HUBComponentType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBConnectivityState.html">HUBConnectivityState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBScrollPosition.html">HUBScrollPosition</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBAction.html">HUBAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBActionContext.html">HUBActionContext</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBActionFactory.html">HUBActionFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBActionHandler.html">HUBActionHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBActionPerformer.html">HUBActionPerformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBActionRegistry.html">HUBActionRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBAsyncAction.html">HUBAsyncAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBAsyncActionDelegate.html">HUBAsyncActionDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponent.html">HUBComponent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentActionObserver.html">HUBComponentActionObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentActionPerformer.html">HUBComponentActionPerformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentChildDelegate.html">HUBComponentChildDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentContentOffsetObserver.html">HUBComponentContentOffsetObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentFactory.html">HUBComponentFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentFactoryShowcaseNameProvider.html">HUBComponentFactoryShowcaseNameProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentFallbackHandler.html">HUBComponentFallbackHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageData.html">HUBComponentImageData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageDataBuilder.html">HUBComponentImageDataBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageDataJSONSchema.html">HUBComponentImageDataJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentLayoutManager.html">HUBComponentLayoutManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModel.html">HUBComponentModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModelBuilder.html">HUBComponentModelBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModelJSONSchema.html">HUBComponentModelJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentRegistry.html">HUBComponentRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentShowcaseManager.html">HUBComponentShowcaseManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentShowcaseSnapshotGenerator.html">HUBComponentShowcaseSnapshotGenerator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentTarget.html">HUBComponentTarget</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentTargetBuilder.html">HUBComponentTargetBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentTargetJSONSchema.html">HUBComponentTargetJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentViewObserver.html">HUBComponentViewObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithChildren.html">HUBComponentWithChildren</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithImageHandling.html">HUBComponentWithImageHandling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithRestorableUIState.html">HUBComponentWithRestorableUIState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithScrolling.html">HUBComponentWithScrolling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithSelectionState.html">HUBComponentWithSelectionState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBConnectivityStateResolver.html">HUBConnectivityStateResolver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBConnectivityStateResolverObserver.html">HUBConnectivityStateResolverObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperation.html">HUBContentOperation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationActionObserver.html">HUBContentOperationActionObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationActionPerformer.html">HUBContentOperationActionPerformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationContext.html">HUBContentOperationContext</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationDelegate.html">HUBContentOperationDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationFactory.html">HUBContentOperationFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationWithInitialContent.html">HUBContentOperationWithInitialContent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationWithPaginatedContent.html">HUBContentOperationWithPaginatedContent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentReloadPolicy.html">HUBContentReloadPolicy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBFeatureInfo.html">HUBFeatureInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBFeatureRegistry.html">HUBFeatureRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBIcon.html">HUBIcon</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBIconImageResolver.html">HUBIconImageResolver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoader.html">HUBImageLoader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoaderDelegate.html">HUBImageLoaderDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoaderFactory.html">HUBImageLoaderFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONBoolPath.html">HUBJSONBoolPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONCompatibleBuilder.html">HUBJSONCompatibleBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONDictionaryPath.html">HUBJSONDictionaryPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONIntegerPath.html">HUBJSONIntegerPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONPath.html">HUBJSONPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONSchema.html">HUBJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONSchemaRegistry.html">HUBJSONSchemaRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONStringPath.html">HUBJSONStringPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONURLPath.html">HUBJSONURLPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBLiveService.html">HUBLiveService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBLiveServiceDelegate.html">HUBLiveServiceDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBMutableJSONPath.html">HUBMutableJSONPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBSerializable.html">HUBSerializable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewControllerDelegate.html">HUBViewControllerDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewControllerFactory.html">HUBViewControllerFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewControllerScrollHandler.html">HUBViewControllerScrollHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModel.html">HUBViewModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelBuilder.html">HUBViewModelBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelJSONSchema.html">HUBViewModelJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoader.html">HUBViewModelLoader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoaderDelegate.html">HUBViewModelLoaderDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoaderFactory.html">HUBViewModelLoaderFactory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Type Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBComponentCategories.h@T@HUBComponentCategory">HUBComponentCategory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBComponentLayoutTraits.h@T@HUBComponentLayoutTrait">HUBComponentLayoutTrait</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBBlockContentOperationFactory.h@T@HUBContentOperationFactoryBlock">HUBContentOperationFactoryBlock</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBMutableJSONPath.h@T@HUBMutableJSONPathBlock">HUBMutableJSONPathBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#action-programming-guide' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='action-programming-guide'>Action Programming Guide</h1>

<p>Welcome to the Hub Framework action programming guide! This guide aims to help you gain a deeper understanding of how actions work, how to create them and how you can use them to easily extend the framework with additional functionality.</p>

<p>If you haven&rsquo;t already - we really recommend that you read the <a href="https://spotify.github.io/HubFramework/component-programming-guide.html">component programming guide</a> and <a href="https://spotify.github.io/HubFramework/content-programming-guide.html">content programming guide</a> before proceeding with this one.</p>

<p><strong>Table of contents</strong></p>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#creating-an-action">Creating an action</a></li>
<li><a href="#integrating-an-action-with-the-framework">Integrating an action with the framework</a></li>
<li><a href="#triggering-an-action">Triggering an action</a></li>
<li><a href="#responding-to-an-action-in-a-content-operation">Responding to an action in a content operation</a></li>
<li><a href="#handling-actions">Handling actions</a></li>
</ul>
<a href='#introduction' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='introduction'>Introduction</h2>

<p>The Hub Framework comes with built-in selection handling for components. Whenever a component is selected, the <code>URI</code> associated with that component&rsquo;s <code>target</code> will be opened, using the standard <code>[UIApplication openURL:]</code> API. However, if you want to customize the selection behavior, or execute other type of actions based on other user interactions - that&rsquo;s when the Action API comes in handy.</p>

<p>The Action API also makes it easy to send events back to your content operations from your components.</p>
<a href='#creating-an-action' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='creating-an-action'>Creating an action</h2>

<p>Just like components, content operations and the other aspects of the Hub Framework, actions are defined using a protocol - <code>HUBAction</code>. Actions are very simple to implement, all you require is one method:</p>
<pre class="highlight plaintext"><code>@interface SPTMyHubAction : NSObject &lt;HUBAction&gt;

@end
</code></pre>
<pre class="highlight plaintext"><code>@implementation SPTMyHubAction

- (BOOL)performWithContext:(id&lt;HUBActionContext&gt;)context
{
    // Return a boolean indicating whether the action was performed or not
    return YES;
}

@end
</code></pre>

<p>The contextual object passed to the action contains useful information like what view controller (and for which view URI) the action is being performed, as well as the component &amp; view model that the action should be performed for.</p>
<a href='#integrating-an-action-with-the-framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='integrating-an-action-with-the-framework'>Integrating an action with the framework</h2>

<p>Before an action can be used, it must be integrated into the Hub Framework. This is done through the <code>HUBActionRegistry</code> API, which works similar to how the <code>HUBComponentRegistry</code> works for components.</p>

<p>In order to avoid accidentally sharing state between actions, all actions are uniquely created before they are performed, using a factory - an implementation of <code>HUBActionFactory</code>.</p>

<p>So, to integrate your action into the framework, first create a factory class:</p>
<pre class="highlight plaintext"><code>@interface SPTMyActionFactory : NSObject &lt;HUBActionFactory&gt;

@end
</code></pre>
<pre class="highlight plaintext"><code>@implementation SPTMyActionFactory

- (nullable id&lt;HUBAction&gt;)createActionForName:(NSString *)name
{
    if ([name isEqualToString:@"myAction"]) {
        return [SPTMyAction new];
    }

    return nil;
}

@end
</code></pre>

<p>Then, register your factory with the action registry (available on <code>HUBManager</code>):</p>
<pre class="highlight plaintext"><code>id&lt;HUBActionFactory&gt; factory = [SPTMyActionFactory new];
[actionRegistry registerActionFactory:factory forNamespace:@"myNamespace"];
</code></pre>

<p>The <code>namespace</code> used when registering the factory are used to match actions when performed - just like the way components are matched.</p>
<a href='#triggering-an-action' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='triggering-an-action'>Triggering an action</h2>
<a href='#triggering-an-action-from-a-component-model' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='triggering-an-action-from-a-component-model'>Triggering an action from a component model</h3>

<p>Actions that are associated with a <code>HUBComponentModel</code> will automatically be triggered when a component rendering that model was selected by the user.</p>

<p>To add actions to a component model, you add a <code>HUBIdentifier</code> matching your action&rsquo;s <code>name</code> and <code>namespace</code> (that your factory was registered for) either using code in a content operation:</p>
<pre class="highlight plaintext"><code>id&lt;HUBComponentModelBuilder&gt; componentModelBuilder = [viewModelBuilder builderForBodyComponentModelWithIdentifier:@"myComponent"];
[componentModelBuilder.targetBuilder addActionWithNamespace:@"myNamespace"
                                                       name:@"myAction"];
</code></pre>

<p>Or using JSON:</p>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">A</span><span class="w"> </span><span class="err">component</span><span class="w"> </span><span class="err">model</span><span class="w"> </span><span class="err">dictionary</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"myNamespace:myAction"</span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<a href='#triggering-an-action-from-a-component' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='triggering-an-action-from-a-component'>Triggering an action from a component</h3>

<p>You can also have a component implementation manually trigger an action. This can be done at any point in time, for example in response to a custom user interaction (such as a swipe), or some other event.</p>

<p>To make a component able to perform actions, make it conform to the <code>HUBComponentActionPerformer</code> protocol. This gives you an <code>actionDelegate</code> that you can call to perform an action for a given identifier (which will be resolved exactly the same way as when action identifiers are attached to a <code>HUBComponentModel</code>). You also have the option of passing any <code>customData</code> that you can then pick up in the action or in a content operation.</p>

<p>Here&rsquo;s an example where we perform an action in response to a <code>UIGestureRecognizer</code> being triggered:</p>
<pre class="highlight plaintext"><code>- (void)handleGestureRecognizer:(UIGestureRecognizer *)recognizer
{
    HUBIdentifier *actionIdentifier = [[HUBIdentifier alloc] initWithNamespace:@"myFeature" name:@"myAction"];
    [self.actionDelegate component:self performActionWithIdentifier:actionIdentifier customData:nil];
}
</code></pre>
<a href='#responding-to-an-action-in-a-content-operation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='responding-to-an-action-in-a-content-operation'>Responding to an action in a content operation</h2>

<p>As mentioned in the introduction, one thing you can use actions for, is to be able to easily communicate with a content operation from a component. For example, you might want to reschedule an operation based on user interaction, or modify your underlying data.</p>

<p>To observe actions performed in the view that a content operation is serving, conform to the <code>HUBContentOperationActionObserver</code> protocol in your content operation.</p>

<p>In the example below, we are rendering a list of songs based on a <code>SPTSongContentOperation</code>. We then implement a delete button in one of our components, which will trigger an action to delete the song associated with that component from our data source, and then reschedule our content operation to re-render our view (with the component deleted).</p>

<p>First, the component which performs the action when the delete button is tapped:</p>
<pre class="highlight plaintext"><code>@implementation SPTDeletableComponent

- (void)handleDeleteButtonTapped
{
    HUBIdentifier *actionIdentifier = [[HUBIdentifier alloc] initWithNamespace:@"delete" name:@"song"];
    [self.actionDelegate component:self performActionWithIdentifier:actionIdentifier];
}

@end
</code></pre>

<p>Then, the action, which deletes the song from our data source:</p>
<pre class="highlight plaintext"><code>@implementation SPTDeleteSongAction

- (BOOL)performWithContext:(id&lt;HUBActionContext&gt;)context
{
    NSString *songID = context.componentModel.identifier;
    [self.dataSource removeSongWithIdentifier:songID];
    return YES;
}

@end
</code></pre>

<p>Finally, we observe actions being performed in our content operation, and re-schedule it once a delete action was performed:</p>
<pre class="highlight plaintext"><code>@implementation SPTSongContentOperation

- (void)actionPerformedWithContext:(id&lt;HUBActionContext&gt;)context
                       featureInfo:(id&lt;HUBFeatureInfo&gt;)featureInfo
                 connectivityState:(HUBConnectivityState)connectivityState
{
    HUBIdentifier *deleteSongActionID = [[HUBIdentifier alloc] initWithNamespace:@"delete" name:@"song"];

    if ([context.customActionIdentifier isEqual:deleteSongActionID]) {
        [self.delegate contentOperationRequiresRescheduling:self];
    }
}

@end
</code></pre>

<p>The result of the above is that every time a delete button is pressed, the component for that song is deleted from the view.</p>
<a href='#handling-actions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='handling-actions'>Handling actions</h2>

<p>You can also opt to handle certain actions on a feature level. When you set up your feature with the Hub Framework, you can pass an <code>actionHandler</code> (an implementation of the <code>HUBActionHandler</code> protocol), that gets called each time an action is about to be performed. The action handler can then choose to handle the action itself, rather than letting the action being performed.</p>

<p>Let&rsquo;s take the <q>delete a song</q> example from just before, and add some <q>protected songs</q> that are not deletable. That is, when the <code>SPTDeleteSongAction</code> is about to be performed, we check if the song is protected, and if it is - we veto the action, preventing it from being performed. Let&rsquo;s implement <code>HUBActionHandler</code>:</p>
<pre class="highlight plaintext"><code>@implementation SPTMyActionHandler

- (BOOL)handleActionWithContext:(id&lt;HUBActionContext&gt;)context
{
    NSString *songID = context.componentModel.identifier;

    if ([self isSongWithIdentifierProtected:songID]) {
        return YES;
    }

    return NO;
}

@end
</code></pre>

<p>By returning <code>YES</code> above, we tell the Hub Framework that we&rsquo;ve handled the action in our action handler, which means that the action won&rsquo;t be performed.</p>

<p>A global action handler can also be added when setting up <code>HUBManager</code>, that will be used for all features that do not implement their own. For more information about setting up Hub Manager, see the <a href="https://spotify.github.io/HubFramework/setup-guide.html">setup guide</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>Copyright © 2015-2016 Spotify AB</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
